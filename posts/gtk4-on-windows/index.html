<!doctype html><html lang=en-us><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><base href=https://stdin.top/posts/gtk4-on-windows/><meta name=description content="Setup - Compile - Debug ðŸ¤©"><meta name=language content="en"><link rel=sitemap type=application/xml title=Sitemap href=https://stdin.top/sitemap.xml><title>Getting Started with GTK4 on Windows :: &lt;stdin></title><link rel=icon type=image/png href=/static/chip.png><meta property="og:title" content="Getting Started with GTK4 on Windows"><meta property="og:description" content="Setup - Compile - Debug ðŸ¤©"><meta property="og:type" content="article"><meta property="og:url" content="https://stdin.top/posts/gtk4-on-windows/"><meta property="og:image" content="https://www.gtk.org/assets/img/logo-gtk-sm.png"><meta property="article:section" content="posts"><meta property="article:published_time" content="2021-09-04T23:16:02+00:00"><meta property="article:modified_time" content="2023-05-11T19:55:50+05:30"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://www.gtk.org/assets/img/logo-gtk-sm.png"><meta name=twitter:title content="Getting Started with GTK4 on Windows"><meta name=twitter:description content="Setup - Compile - Debug ðŸ¤©"><meta name=theme-color content="#2e2847"><link defer href="https://fonts.googleapis.com/css?family=Ubuntu:300,400,300italic,400italic|Raleway:200,300" rel=stylesheet><link defer href="https://fonts.googleapis.com/css2?family=Tangerine&display=swap" rel=stylesheet><script src=https://stdin.top/js/main.min.6a2ed298f6a8cafbfa5c622ca55cb5be5632cc37b845fc6b58d9d383cf7ec77e9faaedd88196d0d58c0040873d5689898701e5ed30cac06dae52c78f9c0ddc31.js integrity="sha512-ai7SmPaoyvv6XGIspVy1vlYyzDe4RfxrWNnTg89+x36fqu3YgZbQ1YwAQIc9VomJhwHl7TDKwG2uUsePnA3cMQ=="></script>
<link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.14.0/css/fontawesome.min.css integrity="sha512-8jdwayz5n8F2cnW26l9vpV6+yGOcRAqz6HTu+DQ3FtVIAts2gTdlFZOGpYhvBMXkWEgxPN3Y22UWyZXuDowNLA==" crossorigin=anonymous><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.14.0/css/regular.min.css integrity="sha512-qgtcTTDJDk6Fs9eNeN1tnuQwYjhnrJ8wdTVxJpUTkeafKKP6vprqRx5Sj/rB7Q57hoYDbZdtHR4krNZ/11zONg==" crossorigin=anonymous><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.14.0/css/brands.min.css integrity="sha512-AMDXrE+qaoUHsd0DXQJr5dL4m5xmpkGLxXZQik2TvR2VCVKT/XRPQ4e/LTnwl84mCv+eFm92UG6ErWDtGM/Q5Q==" crossorigin=anonymous><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.14.0/css/solid.min.css integrity="sha512-QN7X/bUbbeel9bbq6JVNJXk1Zowt+n+QPN+DjhEmTa4TdL1YPCsCey5JrvfRW8xp28LDYgGG/waNVdrhwMQmVQ==" crossorigin=anonymous><link rel=stylesheet type=text/css media=screen href=https://stdin.top/css/main.min.dc3edd6ae540bf87b9aeab2175e2a0d0f2445f17589e60d223f6d57cf330c8f3b6dced4c45491d9dd6b3d91aa4776adbda6cd10e2ec77fc67671618970ebd7ab.css integrity="sha512-3D7dauVAv4e5rqshdeKg0PJEXxdYnmDSI/bVfPMwyPO23O1MRUkdndaz2Rqkd2rb2mzRDi7Hf8Z2cWGJcOvXqw=="><link rel=stylesheet type=text/css media=screen href=https://stdin.top/css/custom.min.757b18759462b15e8897dc209b4b095bd251a2f738a618a40eea280f31a1a3f6edcb894da93e006c4aa6a1f6e1f67f3c083ea566d1a2ad2e9e7b0a68dc2a257a.css integrity="sha512-dXsYdZRisV6Il9wgm0sJW9JRovc4phikDuooDzGho/bty4lNqT4AbEqmofbh9n88CD6lZtGirS6eewpo3Coleg=="><link rel=stylesheet type=text/css href=https://stdin.top/css/dark.min.7a85efc733bdb0bf14b310fa5de03054b475ca1846babf715d4f15fd0863f9e7074ea0e3548e662a608d8710563460786a7df68ecde3e66abcfa6fcf21fa5888.css media="(prefers-color-scheme: dark)"><link rel=stylesheet type=text/css media=screen href=https://stdin.top/css/normalize.min.15dd2454cf02be612cd84be5a0307ecae7e9c84d08f88ab2d1e9332717d10fe9b63484bb4c5352072da0915d1a6d48fa41994fb99c120c891cca431b4448f44d.css integrity="sha512-Fd0kVM8CvmEs2EvloDB+yufpyE0I+Iqy0ekzJxfRD+m2NIS7TFNSBy2gkV0abUj6QZlPuZwSDIkcykMbREj0TQ=="><script async src="https://www.googletagmanager.com/gtag/js?id=G-YW8V9DTR0N"></script>
<script>var doNotTrack=!1;if(!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-YW8V9DTR0N",{anonymize_ip:!1})}</script><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-8658473214995139" crossorigin=anonymous></script></head><body><div class="container wrapper"><div class=header><base href=https://stdin.top/><h1 class=site-title><a href=https://stdin.top/>&lt;stdin></a>
<span class=blinking-cursor>|</span></h1><div class=site-description><h2 class=cursive>My Thoughts, Trials and Adventures</h2><nav class="nav social"><ul class=flat><a href=mailto:jagadeesh@stdin.top title=Mail><i class="far fa-envelope"></i></a>
<a href=https://github.com/jkotra/ title=Github><i class="fab fa-github"></i></a>
<a href=https://twitter.com/jagadeesh_kotra title=Twitter><i class="fab fa-twitter"></i></a>
<a href=index.xml title=RSS><i class="fas fa-rss"></i></a></ul></div><nav class=nav><ul class=flat><li><a href=/about/>About</a></li><li><a href=/tags/>Tags</a></li><li><a href=/portfolio/>Portfolio</a></li><li><a href=/pgp/>PGP</a></li></ul></nav></div><div class=post><div class=post-header><h1 class=title>Getting Started with GTK4 on Windows</h1><div class=meta>Posted at &mdash; Sep 4, 2021
| Last Modified on &mdash; May 11, 2023</div></div><div class=markdown><h1 id=introduction>Introduction</h1><p>This article guides how to set up and write applications with GTK4 on the windows operating system.</p><h1 id=gtk>GTK</h1><p><img src=https://www.gtk.org/assets/img/logo-gtk-sm.png alt=https://www.gtk.org/assets/img/logo-gtk-sm.png></p><p>GTK (formerly GIMP ToolKit then GTK+) is a free and open-source cross-platform widget toolkit for creating graphical user interfaces (GUIs).</p><p><a href=https://en.wikipedia.org/wiki/GTK#Windows>[wikipedia]</a> <a href=https://gtk.org>[Official Website]</a></p><h1 id=setup>Setup</h1><div class="notices info"><p><p>GTK can also be compiled with MSVC / Visual Studio. while compiling with MSVC makes it more compatible with the Visual Studio ecosystem, it limits the libraries we can include in our project. mixing MSYS2 and MSVC libraries cause problems.</p><p>To compile with MSVC:</p><ul><li><a href=https://download.gnome.org/sources/gtk/>Get the latest tarball</a>.</li><li>Run the following Commands:</li></ul><div class=highlight><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>meson setup -Dmedia-gstreamer=disabled -Dbuild-tests=disabled build
</span></span><span class=line><span class=cl>meson compile -C build
</span></span><span class=line><span class=cl>meson install -C build
</span></span></code></pre></div><p>Refer: <a href=https://www.collabora.com/news-and-blog/blog/2021/03/18/build-and-run-gtk-4-applications-with-visual-studio/>Build and run GTK 4 applications with Visual Studio</a></p></p></div><h3 id=msys2>MSYS2</h3><p><strong>MSYS2</strong> is a collection of tools and libraries providing you with an easy-to-use environment for building, installing, and running native Windows software.</p><ol><li>Install the latest version MSYS2 <a href=https://www.msys2.org/>from their website</a>.</li><li>Navigate to <code>C:\msys2\</code> and launch <code>mingw64.exe</code>.</li><li>to update available repositories and packages, run:
<code>pacman -Syyu</code></li><li>install <code>gtk4</code>, <code>gcc</code> (<code>llvm</code> should work too!), <code>pkg-config</code>:
<code>pacman -S mingw-w64-x86_64-gcc mingw-w64-x86_64-gtk4 mingw-w64-x86_64-pkg-config</code></li></ol><p>Now add Mingw64 directories to System Path so that windows can find them:
add the following to the system path:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>C:\\msys64\\mingw64\\include
</span></span><span class=line><span class=cl>C:\\msys64\\mingw64\\bin
</span></span><span class=line><span class=cl>C:\\msys64\\mingw64\\lib
</span></span></code></pre></div><p><img src=/images/9nD9ZCp.png alt=/images/9nD9ZCp.png></p><ol><li>We also need to pass the output of <code>pkg-config</code> to <code>gcc</code> while compiling. firstly, open <code>CMD</code> and get the output of <code>pkg-config --cflags --libs gtk4</code>.</li></ol><p>It will produce something like this:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>-mfpmath=sse -msse -msse2 -pthread -mms-bitfields -IC:/msys64/mingw64/include/gtk-4.0 -IC:/msys64/mingw64/include -IC:/msys64/mingw64/include/pango-1.0 -IC:/msys64/mingw64/include/harfbuzz -IC:/msys64/mingw64/include/pango-1.0 -IC:/msys64/mingw64/include/fribidi -IC:/msys64/mingw64/include -IC:/msys64/mingw64/include/gdk-pixbuf-2.0 -IC:/msys64/mingw64/include/libpng16 -IC:/msys64/mingw64/include -IC:/msys64/mingw64/include/cairo -IC:/msys64/mingw64/include/lzo -IC:/msys64/mingw64/include -IC:/msys64/mingw64/include/freetype2 -IC:/msys64/mingw64/include/libpng16 -IC:/msys64/mingw64/include/harfbuzz -IC:/msys64/mingw64/include -IC:/msys64/mingw64/include/pixman-1 -IC:/msys64/mingw64/include -IC:/msys64/mingw64/include/graphene-1.0 -IC:/msys64/mingw64/lib/graphene-1.0/include -IC:/msys64/mingw64/include -IC:/msys64/mingw64/include/glib-2.0 -IC:/msys64/mingw64/lib/glib-2.0/include -IC:/msys64/mingw64/include -LC:/msys64/mingw64/lib -lgtk-4 -lpangowin32-1.0 -lpangocairo-1.0 -lpango-1.0 -lharfbuzz -lgdk_pixbuf-2.0 -lcairo-gobject -lcairo -lvulkan -lgraphene-1.0 -lgio-2.0 -lgobject-2.0 -lglib-2.0 -lintl
</span></span></code></pre></div><p>copy the output and add it as a System Variable (I saved it as <code>GTK4-PKG-CONFIG</code>):</p><p><img src=/images/oxcoJbA.png alt=/images/oxcoJbA.png></p><h3 id=visual-studio-code>Visual Studio Code</h3><p>I prefer Visual studio code for all my coding tasks. You can get the latest version of Visual studio code <a href=https://code.visualstudio.com/>from their website</a>.</p><ol><li>Create a new folder and open it in VSCode.</li><li>create a new file <code>.vscode/c_cpp_properties.json</code> and put the following in it:</li></ol><div class=highlight><pre tabindex=0 class=chroma><code class=language-json data-lang=json><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;configurations&#34;</span><span class=p>:</span> <span class=p>[</span>
</span></span><span class=line><span class=cl>        <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=nt>&#34;name&#34;</span><span class=p>:</span> <span class=s2>&#34;Win32&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=nt>&#34;includePath&#34;</span><span class=p>:</span> <span class=p>[</span>
</span></span><span class=line><span class=cl>                <span class=s2>&#34;${workspaceFolder}\\**&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                <span class=s2>&#34;C:\\msys64\\mingw64\\include\\**&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                <span class=s2>&#34;C:\\msys64\\mingw64\\lib\\glib-2.0\\include&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                <span class=s2>&#34;C:\\msys64\\mingw64\\lib\\graphene-1.0\\include&#34;</span>
</span></span><span class=line><span class=cl>            <span class=p>]</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=p>],</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;version&#34;</span><span class=p>:</span> <span class=mi>4</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><p>notice the <code>C:\msys64\mingw64\include\**</code>, <code>C:\msys64\mingw64\lib\glib-2.0\include</code> and <code>C:\msys64\mingw64\lib\graphene-1.0\include</code>. these are the header files we need for auto complete suggestions which will make our life easier.</p><ol start=3><li>create a new file, <code>hello_world.c</code> file, and paste the <code>Hello World</code> C program from <a href=https://gtk.org>GTK.org</a>:</li></ol><div class=highlight><pre tabindex=0 class=chroma><code class=language-c data-lang=c><span class=line><span class=cl><span class=c1>// Include gtk
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=cp>#include</span> <span class=cpf>&lt;gtk/gtk.h&gt;</span><span class=cp>
</span></span></span><span class=line><span class=cl><span class=cp></span>
</span></span><span class=line><span class=cl><span class=k>static</span> <span class=kt>void</span> <span class=nf>on_activate</span> <span class=p>(</span><span class=n>GtkApplication</span> <span class=o>*</span><span class=n>app</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=c1>// Create a new window
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=n>GtkWidget</span> <span class=o>*</span><span class=n>window</span> <span class=o>=</span> <span class=nf>gtk_application_window_new</span> <span class=p>(</span><span class=n>app</span><span class=p>);</span>
</span></span><span class=line><span class=cl>  <span class=c1>// Create a new button
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=n>GtkWidget</span> <span class=o>*</span><span class=n>button</span> <span class=o>=</span> <span class=nf>gtk_button_new_with_label</span> <span class=p>(</span><span class=s>&#34;Hello, World!&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>  <span class=c1>// When the button is clicked, close the window passed as an argument
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=nf>g_signal_connect_swapped</span> <span class=p>(</span><span class=n>button</span><span class=p>,</span> <span class=s>&#34;clicked&#34;</span><span class=p>,</span> <span class=nf>G_CALLBACK</span> <span class=p>(</span><span class=n>gtk_window_close</span><span class=p>),</span> <span class=n>window</span><span class=p>);</span>
</span></span><span class=line><span class=cl>  <span class=nf>gtk_window_set_child</span> <span class=p>(</span><span class=nf>GTK_WINDOW</span> <span class=p>(</span><span class=n>window</span><span class=p>),</span> <span class=n>button</span><span class=p>);</span>
</span></span><span class=line><span class=cl>  <span class=nf>gtk_window_present</span> <span class=p>(</span><span class=nf>GTK_WINDOW</span> <span class=p>(</span><span class=n>window</span><span class=p>));</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kt>int</span> <span class=nf>main</span> <span class=p>(</span><span class=kt>int</span> <span class=n>argc</span><span class=p>,</span> <span class=kt>char</span> <span class=o>*</span><span class=n>argv</span><span class=p>[])</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=c1>// Create a new application
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=n>GtkApplication</span> <span class=o>*</span><span class=n>app</span> <span class=o>=</span> <span class=nf>gtk_application_new</span> <span class=p>(</span><span class=s>&#34;com.example.GtkApplication&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                                             <span class=n>G_APPLICATION_FLAGS_NONE</span><span class=p>);</span>
</span></span><span class=line><span class=cl>  <span class=nf>g_signal_connect</span> <span class=p>(</span><span class=n>app</span><span class=p>,</span> <span class=s>&#34;activate&#34;</span><span class=p>,</span> <span class=nf>G_CALLBACK</span> <span class=p>(</span><span class=n>on_activate</span><span class=p>),</span> <span class=nb>NULL</span><span class=p>);</span>
</span></span><span class=line><span class=cl>  <span class=k>return</span> <span class=nf>g_application_run</span> <span class=p>(</span><span class=nf>G_APPLICATION</span> <span class=p>(</span><span class=n>app</span><span class=p>),</span> <span class=n>argc</span><span class=p>,</span> <span class=n>argv</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><ol start=4><li>Compile the program:
<code>gcc hello_world.c -o hello_world.exe -mwindows %GTK4-PKG-CONFIG%</code></li><li>Run the program by clicking on generated <code>.exe</code> file.</li></ol><p><img src=/images/oHf7ZqG.png alt=/images/oHf7ZqG.png></p><div class="notices note"><p><p>If you are running Windows on a <strong>virtual machine</strong> and facing any issues with rendering such as bulky black borders, use <code>CAIRO</code> backend for now. support for VGPU (provided by the hypervisor) is very basic and unstable.</p><p><code>$env:GSK_RENDERER = "CAIRO"</code></p></p></div><h3 id=debugging>Debugging</h3><p>Setting up debugging enviroment is quite easy. Defaults should just work fine as long as you select the correct compiler when prompted, I&rsquo;ve added <code>-mwindows</code> to compile flags for good measure.</p><p><code>.vscode/launch.json</code></p><div class=highlight><pre tabindex=0 class=chroma><code class=language-json data-lang=json><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;version&#34;</span><span class=p>:</span> <span class=s2>&#34;0.2.0&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;configurations&#34;</span><span class=p>:</span> <span class=p>[</span>
</span></span><span class=line><span class=cl>        <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=nt>&#34;name&#34;</span><span class=p>:</span> <span class=s2>&#34;gcc.exe - Build and debug active file&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=nt>&#34;type&#34;</span><span class=p>:</span> <span class=s2>&#34;cppdbg&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=nt>&#34;request&#34;</span><span class=p>:</span> <span class=s2>&#34;launch&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=nt>&#34;program&#34;</span><span class=p>:</span> <span class=s2>&#34;${fileDirname}\\${fileBasenameNoExtension}.exe&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=nt>&#34;args&#34;</span><span class=p>:</span> <span class=p>[],</span>
</span></span><span class=line><span class=cl>            <span class=nt>&#34;stopAtEntry&#34;</span><span class=p>:</span> <span class=kc>false</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=nt>&#34;cwd&#34;</span><span class=p>:</span> <span class=s2>&#34;${fileDirname}&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=nt>&#34;environment&#34;</span><span class=p>:</span> <span class=p>[],</span>
</span></span><span class=line><span class=cl>            <span class=nt>&#34;externalConsole&#34;</span><span class=p>:</span> <span class=kc>false</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=nt>&#34;MIMode&#34;</span><span class=p>:</span> <span class=s2>&#34;gdb&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=nt>&#34;miDebuggerPath&#34;</span><span class=p>:</span> <span class=s2>&#34;C:\\msys64\\mingw64\\bin\\gdb.exe&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=nt>&#34;setupCommands&#34;</span><span class=p>:</span> <span class=p>[</span>
</span></span><span class=line><span class=cl>                <span class=p>{</span>
</span></span><span class=line><span class=cl>                    <span class=nt>&#34;description&#34;</span><span class=p>:</span> <span class=s2>&#34;Enable pretty-printing for gdb&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                    <span class=nt>&#34;text&#34;</span><span class=p>:</span> <span class=s2>&#34;-enable-pretty-printing&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                    <span class=nt>&#34;ignoreFailures&#34;</span><span class=p>:</span> <span class=kc>true</span>
</span></span><span class=line><span class=cl>                <span class=p>}</span>
</span></span><span class=line><span class=cl>            <span class=p>],</span>
</span></span><span class=line><span class=cl>            <span class=nt>&#34;preLaunchTask&#34;</span><span class=p>:</span> <span class=s2>&#34;C/C++: gcc.exe build active file&#34;</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=p>]</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><p><code>.vscode/tasks.json</code></p><div class=highlight><pre tabindex=0 class=chroma><code class=language-json data-lang=json><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;tasks&#34;</span><span class=p>:</span> <span class=p>[</span>
</span></span><span class=line><span class=cl>        <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=nt>&#34;type&#34;</span><span class=p>:</span> <span class=s2>&#34;cppbuild&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=nt>&#34;label&#34;</span><span class=p>:</span> <span class=s2>&#34;C/C++: gcc.exe build active file&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=nt>&#34;command&#34;</span><span class=p>:</span> <span class=s2>&#34;C:\\msys64\\mingw64\\bin\\gcc.exe&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=nt>&#34;args&#34;</span><span class=p>:</span> <span class=p>[</span>
</span></span><span class=line><span class=cl>                <span class=s2>&#34;-g&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                <span class=s2>&#34;${file}&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                <span class=s2>&#34;-o&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                <span class=s2>&#34;${fileDirname}\\${fileBasenameNoExtension}.exe&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                <span class=s2>&#34;-mwindows&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                <span class=s2>&#34;%GTK4-PKG-CONFIG%&#34;</span>
</span></span><span class=line><span class=cl>            <span class=p>],</span>
</span></span><span class=line><span class=cl>            <span class=nt>&#34;options&#34;</span><span class=p>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>                <span class=nt>&#34;cwd&#34;</span><span class=p>:</span> <span class=s2>&#34;${fileDirname}&#34;</span>
</span></span><span class=line><span class=cl>            <span class=p>},</span>
</span></span><span class=line><span class=cl>            <span class=nt>&#34;problemMatcher&#34;</span><span class=p>:</span> <span class=p>[</span>
</span></span><span class=line><span class=cl>                <span class=s2>&#34;$gcc&#34;</span>
</span></span><span class=line><span class=cl>            <span class=p>],</span>
</span></span><span class=line><span class=cl>            <span class=nt>&#34;group&#34;</span><span class=p>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>                <span class=nt>&#34;kind&#34;</span><span class=p>:</span> <span class=s2>&#34;build&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                <span class=nt>&#34;isDefault&#34;</span><span class=p>:</span> <span class=kc>true</span>
</span></span><span class=line><span class=cl>            <span class=p>},</span>
</span></span><span class=line><span class=cl>            <span class=nt>&#34;detail&#34;</span><span class=p>:</span> <span class=s2>&#34;Task generated by Debugger.&#34;</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=p>],</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;version&#34;</span><span class=p>:</span> <span class=s2>&#34;2.0.0&#34;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><p>Add breakpoint wherever you wish and debug away!</p><p><img src=/images/QVZD3Bq.png alt=/images/QVZD3Bq.png></p><h2 id=a-bit-complicated-example>A bit complicated example&mldr;</h2><p>Let&rsquo;s make things a little complicated, suppose we want to make an application to show the current time using Win32 API, this is how it can be done:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-c data-lang=c><span class=line><span class=cl><span class=cp>#include</span> <span class=cpf>&lt;stdio.h&gt;</span><span class=cp>
</span></span></span><span class=line><span class=cl><span class=cp>#include</span> <span class=cpf>&lt;windows.h&gt;</span><span class=cp>
</span></span></span><span class=line><span class=cl><span class=cp>#include</span> <span class=cpf>&lt;gtk/gtk.h&gt;</span><span class=cp>
</span></span></span><span class=line><span class=cl><span class=cp></span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kt>void</span> <span class=nf>get_current_time</span><span class=p>(</span><span class=n>GtkButton</span> <span class=o>*</span><span class=n>btn</span><span class=p>,</span> <span class=n>GtkLabel</span> <span class=o>*</span><span class=n>label</span><span class=p>){</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=n>SYSTEMTIME</span> <span class=n>st</span><span class=p>,</span> <span class=n>lt</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=nf>printf</span><span class=p>(</span><span class=s>&#34;Button Clicked!</span><span class=se>\n</span><span class=s>&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>  <span class=nf>GetSystemTime</span><span class=p>(</span><span class=o>&amp;</span><span class=n>st</span><span class=p>);</span>
</span></span><span class=line><span class=cl>  <span class=nf>GetLocalTime</span><span class=p>(</span><span class=o>&amp;</span><span class=n>lt</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=kt>char</span> <span class=n>buf</span><span class=p>[</span><span class=mi>1024</span><span class=p>];</span>
</span></span><span class=line><span class=cl>  <span class=nf>sprintf</span><span class=p>(</span><span class=n>buf</span><span class=p>,</span> <span class=s>&#34;%02d:%02d:%02d %d/%d/%d&#34;</span><span class=p>,</span> <span class=n>st</span><span class=p>.</span><span class=n>wHour</span><span class=p>,</span> <span class=n>st</span><span class=p>.</span><span class=n>wMinute</span><span class=p>,</span> <span class=n>st</span><span class=p>.</span><span class=n>wSecond</span><span class=p>,</span> <span class=n>st</span><span class=p>.</span><span class=n>wDay</span><span class=p>,</span> <span class=n>st</span><span class=p>.</span><span class=n>wMonth</span><span class=p>,</span> <span class=n>st</span><span class=p>.</span><span class=n>wYear</span><span class=p>);</span>
</span></span><span class=line><span class=cl>  <span class=nf>gtk_label_set_label</span><span class=p>(</span><span class=n>label</span><span class=p>,</span> <span class=n>buf</span><span class=p>);</span>
</span></span><span class=line><span class=cl>  
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>static</span> <span class=kt>void</span> <span class=nf>on_activate</span> <span class=p>(</span><span class=n>GtkApplication</span> <span class=o>*</span><span class=n>app</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=c1>// Create a new window
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=n>GtkWidget</span> <span class=o>*</span><span class=n>window</span> <span class=o>=</span> <span class=nf>gtk_application_window_new</span> <span class=p>(</span><span class=n>app</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=n>GtkWidget</span> <span class=o>*</span><span class=n>box</span> <span class=o>=</span> <span class=nf>gtk_box_new</span><span class=p>(</span><span class=n>GTK_ORIENTATION_VERTICAL</span><span class=p>,</span> <span class=mi>4</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=n>GtkWidget</span> <span class=o>*</span><span class=n>label</span> <span class=o>=</span> <span class=nf>gtk_label_new</span><span class=p>(</span><span class=s>&#34;Hello GTK!&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>  <span class=n>GtkWidget</span> <span class=o>*</span><span class=n>btn</span> <span class=o>=</span> <span class=nf>gtk_button_new_with_label</span><span class=p>(</span><span class=s>&#34;Get Current Time&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>  <span class=nf>gtk_widget_set_margin_start</span><span class=p>(</span><span class=nf>GTK_WIDGET</span><span class=p>(</span><span class=n>btn</span><span class=p>),</span> <span class=mi>4</span><span class=p>);</span>
</span></span><span class=line><span class=cl>  <span class=nf>gtk_widget_set_margin_end</span><span class=p>(</span><span class=nf>GTK_WIDGET</span><span class=p>(</span><span class=n>btn</span><span class=p>),</span> <span class=mi>4</span><span class=p>);</span>
</span></span><span class=line><span class=cl>  <span class=nf>g_signal_connect_after</span><span class=p>(</span><span class=n>btn</span> <span class=p>,</span> <span class=s>&#34;clicked&#34;</span><span class=p>,</span> <span class=p>(</span><span class=n>GCallback</span><span class=p>)</span><span class=n>get_current_time</span><span class=p>,</span> <span class=n>label</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=nf>gtk_box_append</span><span class=p>(</span><span class=nf>GTK_BOX</span><span class=p>(</span><span class=n>box</span><span class=p>),</span> <span class=n>label</span><span class=p>);</span>
</span></span><span class=line><span class=cl>  <span class=nf>gtk_box_append</span><span class=p>(</span><span class=nf>GTK_BOX</span><span class=p>(</span><span class=n>box</span><span class=p>),</span> <span class=n>btn</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=nf>gtk_window_set_child</span> <span class=p>(</span><span class=nf>GTK_WINDOW</span> <span class=p>(</span><span class=n>window</span><span class=p>),</span> <span class=n>box</span><span class=p>);</span>
</span></span><span class=line><span class=cl>  <span class=nf>gtk_window_present</span> <span class=p>(</span><span class=nf>GTK_WINDOW</span> <span class=p>(</span><span class=n>window</span><span class=p>));</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kt>int</span> <span class=nf>main</span> <span class=p>(</span><span class=kt>int</span> <span class=n>argc</span><span class=p>,</span> <span class=kt>char</span> <span class=o>*</span><span class=n>argv</span><span class=p>[])</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=c1>// Create a new application
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=n>GtkApplication</span> <span class=o>*</span><span class=n>app</span> <span class=o>=</span> <span class=nf>gtk_application_new</span> <span class=p>(</span><span class=s>&#34;com.example.GtkApplication&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                                             <span class=n>G_APPLICATION_FLAGS_NONE</span><span class=p>);</span>
</span></span><span class=line><span class=cl>  <span class=nf>g_signal_connect</span> <span class=p>(</span><span class=n>app</span><span class=p>,</span> <span class=s>&#34;activate&#34;</span><span class=p>,</span> <span class=nf>G_CALLBACK</span> <span class=p>(</span><span class=n>on_activate</span><span class=p>),</span> <span class=nb>NULL</span><span class=p>);</span>
</span></span><span class=line><span class=cl>  <span class=k>return</span> <span class=nf>g_application_run</span> <span class=p>(</span><span class=nf>G_APPLICATION</span> <span class=p>(</span><span class=n>app</span><span class=p>),</span> <span class=n>argc</span><span class=p>,</span> <span class=n>argv</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><p>Compile the program with:</p><p><code>gcc whatismytime.c -o whatismytime -mwindows %GTK4-PKG-CONFIG%</code></p><p><img src=/images/YURHuEM.png alt=/images/YURHuEM.png></p><h3 id=meson-build-system>Meson Build System</h3><p><a href=https://github.com/jkotra/WhatIsMyTime>Available on Github</a>.</p><p>Meson is the official build system used by GNOME. I&rsquo;ve taken the above example and made it into a Meson Project.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>tree
</span></span><span class=line><span class=cl>â”œâ”€â”€ meson.build
</span></span><span class=line><span class=cl>â”œâ”€â”€ README.md
</span></span><span class=line><span class=cl>â””â”€â”€ src
</span></span><span class=line><span class=cl>    â”œâ”€â”€ meson.build
</span></span><span class=line><span class=cl>    â””â”€â”€ whatismytime.c
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>1 directory, 4 files
</span></span></code></pre></div><div class="notices info"><p><code>meson</code> uses <code>ninja</code> to build/compile. get the latest <code>ninja</code> from <a href=https://github.com/ninja-build/ninja/releases>their Github page</a> and add the extracted directory to System Path.</p></div><p>to build:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>meson build
</span></span><span class=line><span class=cl>ninja -C build
</span></span></code></pre></div><p>and then navigate to <code>build/src</code> and execute <code>whatismytime.exe</code></p></div><div class=post-tags><nav class="nav tags"><ul class=flat><li><a href=/tags/c>C</a></li><li><a href=/tags/gtk>gtk</a></li></ul></nav></div><div id=commento></div><script onload=setCommentsTheme() id=comments src=https://utteranc.es/client.js repo=jkotra/stdin.top-comments issue-term=pathname label=ðŸ’¬ theme=github-light crossorigin=anonymous async></script><noscript>Please enable JavaScript to view the
<a href=https://commento.io/>comments powered by Commento.</a></noscript></div><link rel=stylesheet type=text/css href=https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.11.1/katex.min.css><script type=text/javascript src=https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.11.1/katex.min.js></script>
<script type=text/javascript src=https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.11.1/contrib/auto-render.min.js onload=renderMathInElement(document.body)></script></div></div><div class="footer wrapper"><script src=https://stdin.top/js/clipboard.min.988b4327074a4060e229a35c60cd186ef38420c9eb8b5eda4d19c4d29554742bf34e24b10eacaf02cce8d9a92e398fc4d47ed6a10f98d3f8a0bf68d2ac373e60.js integrity="sha512-mItDJwdKQGDiKaNcYM0YbvOEIMnri17aTRnE0pVUdCvzTiSxDqyvAszo2akuOY/E1H7WoQ+Y0/igv2jSrDc+YA=="></script><nav class=nav><div class=badge><a href=https://creativecommons.org/licenses/by-sa/4.0/ aria-label="CC BY-SA 4.0"><img alt="cc by-sa badge" src=/cc/by-sa.png></a></div><div><a href=https://github.com/jkotra/kavi-hugo-theme>Kavi</a> (based on <a href=https://github.com/vividvilla/ezhil>ezhil</a>)</a> | Built with <a href=https://gohugo.io>Hugo</a></div></nav></div></body></html>