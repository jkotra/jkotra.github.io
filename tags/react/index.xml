<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>React on &lt;stdin></title><link>https://stdin.top/tags/react/</link><description>Recent content in React on &lt;stdin></description><generator>Hugo -- gohugo.io</generator><language>en-us</language><lastBuildDate>Sat, 21 Mar 2020 20:13:16 +0530</lastBuildDate><atom:link href="https://stdin.top/tags/react/index.xml" rel="self" type="application/rss+xml"/><item><title>'Know Your IP Address' with React</title><link>https://stdin.top/posts/react-myip/</link><pubDate>Sat, 21 Mar 2020 20:13:16 +0530</pubDate><guid>https://stdin.top/posts/react-myip/</guid><description>&lt;p>&lt;a href="https://lab.stdin.top/#/myip/">Demo&lt;/a> | &lt;a href="https://gitlab.com/synk.0x1/lab.stdin.top/-/blob/master/src/components/pages/MyIp.js">Code&lt;/a>&lt;/p>
&lt;p>This is a quick primer on how to make a &amp;lsquo;Know Your IP&amp;rsquo; page with React.&lt;/p>
&lt;div class="notices info" >&lt;p>To follow through this, you will need to install &lt;code>node&lt;/code>, and create a new project using &lt;code>create-react-app&lt;/code>.This tutorial only deals with creating &lt;em>Know Your IP Address&lt;/em> Component.&lt;/p>&lt;/div>
&lt;hr>
&lt;h1 id="prerequisites">Prerequisites&lt;/h1>
&lt;ol>
&lt;li>&lt;a href="https://www.npmjs.com/package/public-ip">public-ip&lt;/a> module&lt;/li>
&lt;li>Working knowledge with &lt;a href="https://reactjs.org/">React&lt;/a> and ES6 Javascript.&lt;/li>
&lt;/ol>
&lt;hr>
&lt;p>Start by making a default skeleton component.&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-js" data-lang="js">
&lt;span class="kr">import&lt;/span> &lt;span class="nx">React&lt;/span> &lt;span class="nx">from&lt;/span> &lt;span class="s1">&amp;#39;react&amp;#39;&lt;/span>&lt;span class="p">;&lt;/span>
&lt;span class="kr">const&lt;/span> &lt;span class="nx">publicIp&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nx">require&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;public-ip&amp;#39;&lt;/span>&lt;span class="p">);&lt;/span>
&lt;span class="nx">render&lt;/span>&lt;span class="p">(){&lt;/span>
&lt;span class="k">return&lt;/span> &lt;span class="o">&amp;lt;&lt;/span>&lt;span class="nx">div&lt;/span>&lt;span class="o">&amp;gt;&lt;/span>
&lt;span class="o">&amp;lt;&lt;/span>&lt;span class="nx">h1&lt;/span>&lt;span class="o">&amp;gt;&lt;/span>&lt;span class="nx">Hello&lt;/span> &lt;span class="nx">World&lt;/span>&lt;span class="o">!&amp;lt;&lt;/span>&lt;span class="err">/h1&amp;gt;&lt;/span>
&lt;span class="o">&amp;lt;&lt;/span>&lt;span class="err">/div&amp;gt;&lt;/span>
&lt;span class="p">}&lt;/span>
&lt;span class="p">}&lt;/span>
&lt;span class="kr">export&lt;/span> &lt;span class="k">default&lt;/span> &lt;span class="nx">MyIp&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;p>Make sure this is working, when you visit the component, it should display &amp;ldquo;Hello World!&amp;rdquo;&lt;/p>
&lt;hr>
&lt;p>Create a &lt;code>constructor&lt;/code> for our class.&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-js" data-lang="js">&lt;span class="nx">constructor&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">props&lt;/span>&lt;span class="p">){&lt;/span>
&lt;span class="kr">super&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">props&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="k">this&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">state&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">{&lt;/span>&lt;span class="s1">&amp;#39;ipv4&amp;#39;&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="s1">&amp;#39;0.0.0.0&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s1">&amp;#39;ok&amp;#39;&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="kc">false&lt;/span>&lt;span class="p">}&lt;/span>
&lt;span class="p">}&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;p>Here, I initiate a React &lt;code>state&lt;/code> with 2 value pairs.&lt;/p>
&lt;ul>
&lt;li>&lt;code>'ipv4': '0.0.0.0'&lt;/code> - Placeholder that we update after retriving user&amp;rsquo;s ip.&lt;/li>
&lt;li>&lt;code>'ok': false&lt;/code> - This will be set to &lt;code>True&lt;/code> if user&amp;rsquo;s ip is sucessfully retrived.&lt;/li>
&lt;/ul>
&lt;hr>
&lt;p>These are some helper functions the retrieve and update IP in the state:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-js" data-lang="js"> &lt;span class="kr">async&lt;/span> &lt;span class="nx">get_ip_user_ipv4&lt;/span>&lt;span class="p">(){&lt;/span>
&lt;span class="kd">let&lt;/span> &lt;span class="nx">ip&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="kr">await&lt;/span> &lt;span class="nx">publicIp&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">v4&lt;/span>&lt;span class="p">();&lt;/span>
&lt;span class="k">return&lt;/span> &lt;span class="nx">ip&lt;/span>
&lt;span class="p">}&lt;/span>
&lt;span class="kr">async&lt;/span> &lt;span class="nx">set_ip&lt;/span>&lt;span class="p">(){&lt;/span>
&lt;span class="kd">var&lt;/span> &lt;span class="nx">curr_ip_ipv4&lt;/span>&lt;span class="p">;&lt;/span>
&lt;span class="k">try&lt;/span>&lt;span class="p">{&lt;/span>
&lt;span class="nx">curr_ip_ipv4&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="kr">await&lt;/span> &lt;span class="k">this&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">get_ip_user_ipv4&lt;/span>&lt;span class="p">();&lt;/span>
&lt;span class="p">}&lt;/span>&lt;span class="k">catch&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">err&lt;/span>&lt;span class="p">){&lt;/span> &lt;span class="nx">console&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">log&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">err&lt;/span>&lt;span class="p">);&lt;/span> &lt;span class="nx">curr_ip_ipv4&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="kc">undefined&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="p">}&lt;/span>
&lt;span class="k">if&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="o">!&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">curr_ip_ipv4&lt;/span> &lt;span class="o">===&lt;/span> &lt;span class="kc">undefined&lt;/span>&lt;span class="p">)){&lt;/span>
&lt;span class="k">this&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">setState&lt;/span>&lt;span class="p">({&lt;/span>&lt;span class="s1">&amp;#39;ipv4&amp;#39;&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="nx">curr_ip_ipv4&lt;/span>&lt;span class="p">})&lt;/span>
&lt;span class="k">this&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">setState&lt;/span>&lt;span class="p">({&lt;/span>&lt;span class="s1">&amp;#39;ok&amp;#39;&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="kc">true&lt;/span>&lt;span class="p">})&lt;/span>
&lt;span class="p">}&lt;/span>
&lt;span class="nx">console&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">log&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="k">this&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">state&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">ipv4&lt;/span>&lt;span class="p">);&lt;/span>
&lt;span class="p">}&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;p>&lt;code>set_ip()&lt;/code> is the entry point. It will further call &lt;code>get_ip_user_ipv4()&lt;/code> to get IP address of the user.It will then update &lt;code>ipv4&lt;/code> state with retrieved IP and set &lt;code>ok&lt;/code> state to &lt;code>True&lt;/code>&lt;/p>
&lt;hr>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-js" data-lang="js">&lt;span class="nx">render&lt;/span>&lt;span class="p">(){&lt;/span>
&lt;span class="k">return&lt;/span> &lt;span class="o">&amp;lt;&lt;/span>&lt;span class="nx">div&lt;/span>&lt;span class="o">&amp;gt;&lt;/span>
&lt;span class="p">{&lt;/span>&lt;span class="k">this&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">state&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">ok&lt;/span> &lt;span class="o">?&lt;/span>
&lt;span class="o">&amp;lt;&lt;/span>&lt;span class="nx">div&lt;/span> &lt;span class="nx">className&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;alert alert-primary&amp;#34;&lt;/span> &lt;span class="nx">role&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;alert&amp;#34;&lt;/span>&lt;span class="o">&amp;gt;&lt;/span>
&lt;span class="o">&amp;lt;&lt;/span>&lt;span class="nx">h3&lt;/span>&lt;span class="o">&amp;gt;&lt;/span>&lt;span class="nx">Your&lt;/span> &lt;span class="nx">IP&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="p">{&lt;/span>&lt;span class="k">this&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">state&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">ipv4&lt;/span>&lt;span class="p">}&lt;/span>&lt;span class="o">&amp;lt;&lt;/span>&lt;span class="err">/h3&amp;gt;&lt;/span>
&lt;span class="o">&amp;lt;&lt;/span>&lt;span class="err">/div&amp;gt;: null}&lt;/span>
&lt;span class="o">&amp;lt;&lt;/span>&lt;span class="nx">button&lt;/span> &lt;span class="nx">className&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;btn btn-success&amp;#34;&lt;/span> &lt;span class="nx">onClick&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="p">{()&lt;/span> &lt;span class="p">=&amp;gt;&lt;/span> &lt;span class="k">this&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">set_ip&lt;/span>&lt;span class="p">()}&lt;/span>&lt;span class="o">&amp;gt;&lt;/span>&lt;span class="nx">Get&lt;/span> &lt;span class="nx">IP&lt;/span>&lt;span class="o">!&amp;lt;&lt;/span>&lt;span class="err">/button&amp;gt;&lt;/span>
&lt;span class="o">&amp;lt;&lt;/span>&lt;span class="err">/div&amp;gt;&lt;/span>
&lt;span class="p">}&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;p>first, we check whether &lt;code>state.ok&lt;/code> is set to True, This means we only want it to render if it is set to true or else return &lt;code>null&lt;/code>. I used &lt;a href="https://getbootstrap.com/docs/4.0/components/alerts/">Bootstrap alert&lt;/a> to make it look good, this is is &lt;em>optional&lt;/em>.&lt;/p>
&lt;p>in &lt;code>Button&lt;/code> we use &lt;code>onClick&lt;/code> prop to invoke our function that retrieves and displays user IP on screen.&lt;/p>
&lt;div class="notices tip" >&lt;p>&lt;a href="https://gitlab.com/synk.0x1/lab.stdin.top/-/blob/master/src/components/pages/MyIp.js">Full code - MyIp.js&lt;/a>&lt;/p>&lt;/div></description></item></channel></rss>